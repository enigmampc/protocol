

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating a React Front-End &mdash; Enigma Protocol 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/css/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Enigma Protocol 0.1 documentation" href="index.html"/>
        <link rel="next" title="System Design" href="SystemDesign.html"/>
        <link rel="prev" title="Writing a Secret Contract" href="SecretContracts.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html" class="icon icon-home"> Enigma Protocol
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="BasicIntroduction.html">Basic Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="BasicIntroduction.html#how-enigma-works">How Enigma Works</a></li>
<li class="toctree-l2"><a class="reference internal" href="BasicIntroduction.html#the-enigma-testnet-what-s-inside">The Enigma Testnet - What’s Inside?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="TechnicalIntroduction.html">Technical Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="TechnicalIntroduction.html#how-enigma-works">How Enigma Works</a></li>
<li class="toctree-l2"><a class="reference internal" href="TechnicalIntroduction.html#the-enigma-testnet-what-s-inside">The Enigma Testnet - What’s Inside?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="HowToUseThisDocumentation.html">How to use this Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="HowToUseThisDocumentation.html#getting-hands-on-with-the-code">Getting Hands-on with the Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowToUseThisDocumentation.html#understanding-the-enigma-protocol">Understanding the Enigma Protocol</a><ul>
<li class="toctree-l3"><a class="reference internal" href="HowToUseThisDocumentation.html#high-level-information">High-level information</a></li>
<li class="toctree-l3"><a class="reference internal" href="HowToUseThisDocumentation.html#low-level-information">Low-level information</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="HowToUseThisDocumentation.html#learning-about-enigma-s-encryption">Learning about Enigma’s Encryption</a></li>
<li class="toctree-l2"><a class="reference internal" href="HowToUseThisDocumentation.html#enigma-use-cases">Enigma Use-Cases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="AboutThisRelease.html">About this Release</a><ul>
<li class="toctree-l2"><a class="reference internal" href="AboutThisRelease.html#selected-features-of-this-release">Selected features of this release</a></li>
<li class="toctree-l2"><a class="reference internal" href="AboutThisRelease.html#assumptions-made-in-this-testnet-release">Assumptions made in this testnet release</a></li>
<li class="toctree-l2"><a class="reference internal" href="AboutThisRelease.html#on-rust">On Rust</a></li>
<li class="toctree-l2"><a class="reference internal" href="AboutThisRelease.html#on-sgx">On SGX</a></li>
<li class="toctree-l2"><a class="reference internal" href="AboutThisRelease.html#on-coupling-with-ethereum">On Coupling with Ethereum</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="GettingStarted.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="GettingStarted.html#frequently-asked-questions">Frequently Asked Questions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="GettingStarted.html#hardware-and-software-mode-what-s-the-difference">Hardware and software mode - what’s the difference?</a></li>
<li class="toctree-l3"><a class="reference internal" href="GettingStarted.html#how-do-i-know-if-my-system-has-an-sgx-enabled-cpu">How do I know if my system has an SGX-enabled CPU?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="GettingStarted.html#testnet-limitations">Testnet Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="GettingStarted.html#system-requirements">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="GettingStarted.html#setting-up-the-testnet">Setting up the Testnet</a></li>
<li class="toctree-l2"><a class="reference internal" href="GettingStarted.html#deploying-the-network">Deploying the Network</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SecretContracts.html">Writing a Secret Contract</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SecretContracts.html#example-01-the-millionaires-problem">Example 01: The Millionaires Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="SecretContracts.html#example-02-secret-auctions">Example 02: Secret Auctions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SecretContracts.html#how-it-works">How it Works</a></li>
<li class="toctree-l3"><a class="reference internal" href="SecretContracts.html#breaking-down-the-code">Breaking Down the Code</a><ul>
<li class="toctree-l4"><a class="reference internal" href="SecretContracts.html#the-contract-state">The Contract State</a></li>
<li class="toctree-l4"><a class="reference internal" href="SecretContracts.html#the-bidding-process">The Bidding Process</a></li>
<li class="toctree-l4"><a class="reference internal" href="SecretContracts.html#post-auction-callable-and-callback">Post-Auction: Callable and Callback</a></li>
<li class="toctree-l4"><a class="reference internal" href="SecretContracts.html#post-auction-withdrawls">Post-Auction: Withdrawls</a></li>
<li class="toctree-l4"><a class="reference internal" href="SecretContracts.html#design-considerations">Design Considerations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Creating a React Front-End</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SystemDesign.html">System Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SystemDesign.html#enigma-js-client-library">Enigma-JS Client Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="SystemDesign.html#enigma-contract">Enigma Contract</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SystemDesign.html#tracking-of-computation-tasks">Tracking of Computation Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="SystemDesign.html#events">Events</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SystemDesign.html#principal-node">Principal Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="SystemDesign.html#enigma-node">Enigma Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="SystemDesign.html#surface">Surface</a></li>
<li class="toctree-l2"><a class="reference internal" href="SystemDesign.html#core">Core</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="NetworkTopology.html">Network Topology</a></li>
<li class="toctree-l1"><a class="reference internal" href="SoftwareArchitecture.html">Software Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SoftwareArchitecture.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="SoftwareArchitecture.html#subsystem-decomposition">Subsystem Decomposition</a></li>
<li class="toctree-l2"><a class="reference internal" href="SoftwareArchitecture.html#logical-components">Logical Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="SoftwareArchitecture.html#mapping-between-subsystems-and-logical-components">Mapping Between Subsystems and Logical Components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="SubsystemArchitecture.html">Subsystem Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="SubsystemArchitecture.html#registration">Registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="SubsystemArchitecture.html#client-encryption-and-storage">Client Encryption and Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="SubsystemArchitecture.html#worker-selection">Worker Selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="SubsystemArchitecture.html#computation">Computation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SubsystemArchitecture.html#payment-of-the-computation-fee">Payment of the Computation Fee</a></li>
<li class="toctree-l3"><a class="reference internal" href="SubsystemArchitecture.html#deserialization-and-decryption">Deserialization and Decryption</a></li>
<li class="toctree-l3"><a class="reference internal" href="SubsystemArchitecture.html#preprocessing">Preprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="SubsystemArchitecture.html#execution-in-evm">Execution in EVM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SubsystemArchitecture.html#on-chain-verification">On-Chain Verification</a><ul>
<li class="toctree-l3"><a class="reference internal" href="SubsystemArchitecture.html#after-each-new-epoch">After Each New Epoch</a></li>
<li class="toctree-l3"><a class="reference internal" href="SubsystemArchitecture.html#post-computation">Post Computation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="SubsystemArchitecture.html#attestation">Attestation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Enigma-js.html">Enigma-JS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Enigma-js.html#validatekeyhex"><strong>validateKeyHex</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="Enigma-js.html#getderivedkey"><strong>getDerivedKey</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="Enigma-js.html#encryptmessage"><strong>encryptMessage</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="Enigma-js.html#getpublickey"><strong>getPublicKey</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="Enigma-js.html#removetrailing0x"><strong>removeTrailing0x</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="Enigma-js.html#recoverpubkey"><strong>recoverPubKey</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="Enigma-js.html#verifysignature"><strong>verifySignature</strong></a></li>
<li class="toctree-l2"><a class="reference internal" href="Enigma-js.html#selectworker"><strong>selectWorker</strong></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="Glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="License.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="Appendix.html">Appendix</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Appendix.html#cryptography">Cryptography</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Appendix.html#elliptic-curve">Elliptic Curve</a></li>
<li class="toctree-l3"><a class="reference internal" href="Appendix.html#signing">Signing</a></li>
<li class="toctree-l3"><a class="reference internal" href="Appendix.html#encryption">Encryption</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Appendix.html#implementation">Implementation</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Enigma Protocol</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Creating a React Front-End</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/CreateReactFrontend.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="creating-a-react-front-end">
<h1>Creating a React Front-End<a class="headerlink" href="#creating-a-react-front-end" title="Permalink to this headline">¶</a></h1>
<p>This section is dedicated to creating a simple graphical front-end for the
<a class="reference internal" href="SecretContracts.html"><span class="doc">Millionaires Problem example</span></a>
using React, a JavaScript library for building component-oriented user interfaces.
The <code class="docutils literal"><span class="pre">enigma-template-dapp</span></code> repository is
based off of <a class="reference external" href="https://github.com/adrianmcli/truffle-react">truffle-react box variant</a>,
which allows for the rapid deployment of a unique front-end with the related packages
and logic separated from the code - in this case, located in the <code class="docutils literal"><span class="pre">/client/src</span></code> folder.</p>
<p>Please note that the below section is almost entirely generic React code that does not
have any role in interfacing with the secret contracts made earlier. There are a couple
small unique portions, Noted by their comment annotations within the code sections below.</p>
<p>If you are unfamiliar with React, it is advised to read <a class="reference external" href="https://reactjs.org/tutorial/tutorial.html">this quick tutorial</a> to get a grasp of the basic concepts and
components involved.</p>
<p>The full source code for the demo application that is built using this section can be found
<a class="reference external" href="https://github.com/enigmampc/enigma-template-dapp/tree/millionaires_problem_demo/client/src">here</a>.</p>
<p><strong>1.</strong> Enter the <code class="docutils literal"><span class="pre">/client/src</span></code> folderof the <code class="docutils literal"><span class="pre">enigma-template-dapp</span></code> directory.</p>
<p><strong>2.</strong> Open up <code class="docutils literal"><span class="pre">App.js</span></code> in your favorite text editor and paste the following code:</p>
<div class="highlight-rust"><div class="highlight"><pre><span class="n">import</span><span class="w"> </span><span class="n">React</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;react&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">getContractInstance</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;./utils/getContractInstance&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">EnigmaSetup</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;./utils/getEnigmaSetup&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">millionairesProblemFactoryContractDefinition</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;./contracts/MillionairesProblemFactory.json&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">millionairesProblemContractDefinition</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;./contracts/MillionairesProblem.json&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">Container</span><span class="p">,</span><span class="w"> </span><span class="n">Message</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;semantic-ui-react&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">Header</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;./Header&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">MillionairesProblemWrapper</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;./MillionairesProblemWrapper&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">Paper</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;@material-ui/core/Paper&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="s">&quot;./App.css&quot;</span><span class="p">;</span><span class="w"></span>
<span class="kr">const</span><span class="w"> </span><span class="n">GAS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1000000&quot;</span><span class="p">;</span><span class="w"></span>

<span class="n">class</span><span class="w"> </span><span class="n">App</span><span class="w"> </span><span class="n">extends</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="n">constructor</span><span class="p">(</span><span class="n">props</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">super</span><span class="p">(</span><span class="n">props</span><span class="p">);</span><span class="w"></span>
<span class="w">   </span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="n">enigmaSetup</span><span class="o">:</span><span class="w"> </span><span class="n">null</span><span class="p">,</span><span class="w"></span>
<span class="w">     </span><span class="n">millionairesProblemFactory</span><span class="o">:</span><span class="w"> </span><span class="n">null</span><span class="p">,</span><span class="w"></span>
<span class="w">     </span><span class="n">millionairesProblem</span><span class="o">:</span><span class="w"> </span><span class="n">null</span><span class="w"></span>
<span class="w">   </span><span class="p">};</span><span class="w"></span>
<span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w"> </span><span class="n">componentDidMount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="cm">/*</span>
<span class="cm">   Initialize bundled object containing web3, accounts, Enigma/EnigmaToken contracts, and</span>
<span class="cm">   enigma/principal wrappers</span>
<span class="cm">   */</span><span class="w"></span>
<span class="w">   </span><span class="kd">let</span><span class="w"> </span><span class="n">enigmaSetup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">EnigmaSetup</span><span class="p">();</span><span class="w"></span>
<span class="w">   </span><span class="n">await</span><span class="w"> </span><span class="n">enigmaSetup</span><span class="p">.</span><span class="n">init</span><span class="p">();</span><span class="w"></span>
<span class="w">   </span><span class="c1">// Initialize MillionairesProblemFactory contract instance</span>
<span class="w">   </span><span class="kr">const</span><span class="w"> </span><span class="n">millionairesProblemFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">getContractInstance</span><span class="p">(</span><span class="w"></span>
<span class="w">     </span><span class="n">enigmaSetup</span><span class="p">.</span><span class="n">web3</span><span class="p">,</span><span class="w"></span>
<span class="w">     </span><span class="n">millionairesProblemFactoryContractDefinition</span><span class="w"></span>
<span class="w">   </span><span class="p">);</span><span class="w"></span>
<span class="w">   </span><span class="kr">const</span><span class="w"> </span><span class="n">millionairesProblems</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">millionairesProblemFactory</span><span class="p">.</span><span class="n">getMillionairesProblems</span><span class="p">.</span><span class="n">call</span><span class="p">();</span><span class="w"></span>
<span class="w">   </span><span class="c1">// If we&#39;ve deployed at least one MillionaireProblem, get the latest one</span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">millionairesProblems</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="kr">const</span><span class="w"> </span><span class="n">millionairesProblem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">getContractInstance</span><span class="p">(</span><span class="w"></span>
<span class="w">       </span><span class="n">enigmaSetup</span><span class="p">.</span><span class="n">web3</span><span class="p">,</span><span class="w"></span>
<span class="w">       </span><span class="n">millionairesProblemContractDefinition</span><span class="p">,</span><span class="w"></span>
<span class="w">       </span><span class="n">millionairesProblems</span><span class="p">[</span><span class="n">millionairesProblems</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"></span>
<span class="w">     </span><span class="p">);</span><span class="w"></span>
<span class="w">     </span><span class="n">this</span><span class="p">.</span><span class="n">setState</span><span class="p">({</span><span class="w"></span>
<span class="w">       </span><span class="n">millionairesProblem</span><span class="w"></span>
<span class="w">     </span><span class="p">});</span><span class="w"></span>
<span class="w">   </span><span class="p">}</span><span class="w"></span>

<span class="w">   </span><span class="n">this</span><span class="p">.</span><span class="n">setState</span><span class="p">({</span><span class="w"> </span><span class="n">enigmaSetup</span><span class="p">,</span><span class="w"> </span><span class="n">millionairesProblemFactory</span><span class="w"> </span><span class="p">});</span><span class="w"></span>
<span class="w"> </span><span class="p">};</span><span class="w"></span>

<span class="w"> </span><span class="c1">// Create fresh, new MillionaireProblem contract</span>
<span class="w"> </span><span class="n">async</span><span class="w"> </span><span class="n">createNewMillionairesProblem</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">await</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">millionairesProblemFactory</span><span class="p">.</span><span class="n">createNewMillionairesProblem</span><span class="p">({</span><span class="w"></span>
<span class="w">     </span><span class="n">from</span><span class="o">:</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">enigmaSetup</span><span class="p">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"></span>
<span class="w">     </span><span class="n">gas</span><span class="o">:</span><span class="w"> </span><span class="n">GAS</span><span class="w"></span>
<span class="w">   </span><span class="p">});</span><span class="w"></span>

<span class="w">   </span><span class="c1">// Obtain the latest-deployed MillionaireProblem instance, this will be the one we interact with</span>
<span class="w">   </span><span class="kr">const</span><span class="w"> </span><span class="n">millionairesProblems</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">millionairesProblemFactory</span><span class="p">.</span><span class="n">getMillionairesProblems</span><span class="p">.</span><span class="n">call</span><span class="p">();</span><span class="w"></span>
<span class="w">   </span><span class="kr">const</span><span class="w"> </span><span class="n">millionairesProblem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">getContractInstance</span><span class="p">(</span><span class="w"></span>
<span class="w">     </span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">enigmaSetup</span><span class="p">.</span><span class="n">web3</span><span class="p">,</span><span class="w"></span>
<span class="w">     </span><span class="n">millionairesProblemContractDefinition</span><span class="p">,</span><span class="w"></span>
<span class="w">     </span><span class="n">millionairesProblems</span><span class="p">[</span><span class="n">millionairesProblems</span><span class="p">.</span><span class="n">length</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="w"></span>
<span class="w">   </span><span class="p">);</span><span class="w"></span>
<span class="w">   </span><span class="n">this</span><span class="p">.</span><span class="n">setState</span><span class="p">({</span><span class="w"></span>
<span class="w">     </span><span class="n">millionairesProblem</span><span class="w"></span>
<span class="w">   </span><span class="p">});</span><span class="w"></span>
<span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w"> </span><span class="n">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">enigmaSetup</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">       </span><span class="o">&lt;</span><span class="n">div</span><span class="w"> </span><span class="n">className</span><span class="o">=</span><span class="s">&quot;App&quot;</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">         </span><span class="o">&lt;</span><span class="n">Header</span><span class="w"> </span><span class="o">/&gt;</span><span class="w"></span>
<span class="w">         </span><span class="o">&lt;</span><span class="n">Message</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s">&quot;red&quot;</span><span class="o">&gt;</span><span class="n">Enigma</span><span class="w"> </span><span class="n">setup</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">loading</span><span class="p">...</span><span class="o">&lt;/</span><span class="n">Message</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">       </span><span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">     </span><span class="p">);</span><span class="w"></span>
<span class="w">   </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">       </span><span class="o">&lt;</span><span class="n">div</span><span class="w"> </span><span class="n">className</span><span class="o">=</span><span class="s">&quot;App&quot;</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">         </span><span class="o">&lt;</span><span class="n">Header</span><span class="w"> </span><span class="o">/&gt;</span><span class="w"></span>
<span class="w">         </span><span class="o">&lt;</span><span class="n">br</span><span class="w"> </span><span class="o">/&gt;</span><span class="w"></span>
<span class="w">         </span><span class="o">&lt;</span><span class="nb">Container</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">           </span><span class="o">&lt;</span><span class="n">Paper</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">             </span><span class="o">&lt;</span><span class="n">MillionairesProblemWrapper</span><span class="w"></span>
<span class="w">               </span><span class="n">onCreateNewMillionaresProblem</span><span class="o">=</span><span class="p">{()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                 </span><span class="n">this</span><span class="p">.</span><span class="n">createNewMillionairesProblem</span><span class="p">();</span><span class="w"></span>
<span class="w">               </span><span class="p">}}</span><span class="w"></span>
<span class="w">               </span><span class="n">enigmaSetup</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">enigmaSetup</span><span class="p">}</span><span class="w"></span>
<span class="w">               </span><span class="n">millionairesProblem</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">millionairesProblem</span><span class="p">}</span><span class="w"></span>
<span class="w">             </span><span class="o">/&gt;</span><span class="w"></span>
<span class="w">           </span><span class="o">&lt;/</span><span class="n">Paper</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">         </span><span class="o">&lt;/</span><span class="nb">Container</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">       </span><span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">     </span><span class="p">);</span><span class="w"></span>
<span class="w">   </span><span class="p">}</span><span class="w"></span>
<span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="n">export</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">App</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>The file <code class="docutils literal"><span class="pre">App.js</span></code> is essentially the index page of your dApps interface, which will handle:</p>
<ul class="simple">
<li>Initialization of all the <code class="docutils literal"><span class="pre">EnigmaSetup</span></code> object [lines 28–29] mentioned above and the top-level rendering of the dApp.</li>
<li>Pulling in the contract ABIs for our custom contracts [lines 4–5] and appropriately setting the state for the current <code class="docutils literal"><span class="pre">MillionairesProblem</span></code> if it exists [lines 35–48].</li>
</ul>
<p><strong>3.</strong> In the same directory, create a file named <code class="docutils literal"><span class="pre">MillionairesProblemWrapper.js</span></code> and paste the following code:</p>
<div class="highlight-rust"><div class="highlight"><pre><span class="n">import</span><span class="w"> </span><span class="n">React</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;react&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">PropTypes</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;prop-types&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">withStyles</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;@material-ui/core/styles&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">Button</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;@material-ui/core/Button&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Message</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;semantic-ui-react&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">AddMillionaireDialog</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;./AddMillionaireDialog&quot;</span><span class="p">;</span><span class="w"></span>
<span class="kr">const</span><span class="w"> </span><span class="n">engUtils</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s">&quot;./lib/enigma-utils&quot;</span><span class="p">);</span><span class="w"></span>
<span class="c1">// Specify the signature for the callable and callback functions, make sure there are NO spaces</span>
<span class="kr">const</span><span class="w"> </span><span class="n">CALLABLE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;computeRichest(address[],uint[])&quot;</span><span class="p">;</span><span class="w"></span>
<span class="kr">const</span><span class="w"> </span><span class="n">CALLBACK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;setRichestAddress(address)&quot;</span><span class="p">;</span><span class="w"></span>
<span class="kr">const</span><span class="w"> </span><span class="n">ENG_FEE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="kr">const</span><span class="w"> </span><span class="n">GAS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;1000000&quot;</span><span class="p">;</span><span class="w"></span>

<span class="kr">const</span><span class="w"> </span><span class="n">styles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">theme</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="w"></span>
<span class="w">       </span><span class="n">button</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">               </span><span class="n">display</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;block&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">               </span><span class="n">marginTop</span><span class="o">:</span><span class="w"> </span><span class="n">theme</span><span class="p">.</span><span class="n">spacing</span><span class="p">.</span><span class="n">unit</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<span class="w">       </span><span class="p">}</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>

<span class="n">class</span><span class="w"> </span><span class="n">MillionairesProblemWrapper</span><span class="w"> </span><span class="n">extends</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">       </span><span class="n">constructor</span><span class="p">(</span><span class="n">props</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">               </span><span class="n">super</span><span class="p">(</span><span class="n">props</span><span class="p">);</span><span class="w"></span>
<span class="w">               </span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                       </span><span class="n">numMillionaires</span><span class="o">:</span><span class="w"> </span><span class="n">null</span><span class="p">,</span><span class="w"></span>
<span class="w">                       </span><span class="n">richestAddress</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;TBD&quot;</span><span class="w"></span>
<span class="w">               </span><span class="p">};</span><span class="w"></span>
<span class="w">               </span><span class="n">this</span><span class="p">.</span><span class="n">handleSubmit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">handleSubmit</span><span class="p">.</span><span class="n">bind</span><span class="p">(</span><span class="n">this</span><span class="p">);</span><span class="w"></span>
<span class="w">               </span><span class="n">this</span><span class="p">.</span><span class="n">addMillionaire</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">addMillionaire</span><span class="p">.</span><span class="n">bind</span><span class="p">(</span><span class="n">this</span><span class="p">);</span><span class="w"></span>
<span class="w">       </span><span class="p">}</span><span class="w"></span>

<span class="w">       </span><span class="n">componentDidMount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">async</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">               </span><span class="cm">/*</span>
<span class="cm">               Check if we have an instance of the MillionairesProblem deployed or not before</span>
<span class="cm">               we call any functions on it</span>
<span class="cm">               */</span><span class="w"></span>
<span class="w">               </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">millionairesProblem</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                       </span><span class="kd">let</span><span class="w"> </span><span class="n">numMillionaires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">millionairesProblem</span><span class="p">.</span><span class="n">numMillionaires</span><span class="p">.</span><span class="n">call</span><span class="p">();</span><span class="w"></span>
<span class="w">                       </span><span class="n">numMillionaires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">numMillionaires</span><span class="p">.</span><span class="n">toNumber</span><span class="p">();</span><span class="w"></span>
<span class="w">                       </span><span class="n">this</span><span class="p">.</span><span class="n">setState</span><span class="p">({</span><span class="w"> </span><span class="n">numMillionaires</span><span class="w"> </span><span class="p">});</span><span class="w"></span>
<span class="w">               </span><span class="p">}</span><span class="w"></span>
<span class="w">       </span><span class="p">};</span><span class="w"></span>

<span class="w">       </span><span class="c1">// Handles re-rendering if we&#39;ve created a new MillionairesProblem (callback resides in parent)</span>
<span class="w">       </span><span class="n">async</span><span class="w"> </span><span class="n">componentWillReceiveProps</span><span class="p">(</span><span class="n">nextProps</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">               </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">millionairesProblem</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">nextProps</span><span class="p">.</span><span class="n">millionairesProblem</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                       </span><span class="n">this</span><span class="p">.</span><span class="n">setState</span><span class="p">({</span><span class="w"> </span><span class="n">numMillionaires</span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">richestAddress</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;TBD&quot;</span><span class="w"> </span><span class="p">});</span><span class="w"></span>
<span class="w">               </span><span class="p">}</span><span class="w"></span>
<span class="w">       </span><span class="p">}</span><span class="w"></span>

<span class="w">       </span><span class="cm">/*</span>
<span class="cm">       Callback for adding a new millionaire. Note that we are encrypting data</span>
<span class="cm">       (address and net worth) in this function and pass in those values to the contract</span>
<span class="cm">       */</span><span class="w"></span>
<span class="w">       </span><span class="n">async</span><span class="w"> </span><span class="n">addMillionaire</span><span class="p">(</span><span class="n">address</span><span class="p">,</span><span class="w"> </span><span class="n">netWorth</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">               </span><span class="kd">let</span><span class="w"> </span><span class="n">encryptedAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getEncryptedValue</span><span class="p">(</span><span class="n">address</span><span class="p">);</span><span class="w"></span>
<span class="w">               </span><span class="kd">let</span><span class="w"> </span><span class="n">encryptedNetWorth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getEncryptedValue</span><span class="p">(</span><span class="n">netWorth</span><span class="p">);</span><span class="w"></span>
<span class="w">               </span><span class="n">await</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">millionairesProblem</span><span class="p">.</span><span class="n">addMillionaire</span><span class="p">(</span><span class="w"></span>
<span class="w">                       </span><span class="n">encryptedAddress</span><span class="p">,</span><span class="w"></span>
<span class="w">                       </span><span class="n">encryptedNetWorth</span><span class="p">,</span><span class="w"></span>
<span class="w">                       </span><span class="p">{</span><span class="w"> </span><span class="n">from</span><span class="o">:</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">enigmaSetup</span><span class="p">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">gas</span><span class="o">:</span><span class="w"> </span><span class="n">GAS</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">               </span><span class="p">);</span><span class="w"></span>
<span class="w">               </span><span class="kd">let</span><span class="w"> </span><span class="n">numMillionaires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">millionairesProblem</span><span class="p">.</span><span class="n">numMillionaires</span><span class="p">.</span><span class="n">call</span><span class="p">();</span><span class="w"></span>
<span class="w">               </span><span class="n">numMillionaires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">numMillionaires</span><span class="p">.</span><span class="n">toNumber</span><span class="p">();</span><span class="w"></span>
<span class="w">               </span><span class="n">this</span><span class="p">.</span><span class="n">setState</span><span class="p">({</span><span class="w"> </span><span class="n">numMillionaires</span><span class="w"> </span><span class="p">});</span><span class="w"></span>
<span class="w">       </span><span class="p">}</span><span class="w"></span>

<span class="w">       </span><span class="cm">/*</span>
<span class="cm">       Creates an Enigma task to be computed by the network.</span>
<span class="cm">       */</span><span class="w"></span>
<span class="w">       </span><span class="n">async</span><span class="w"> </span><span class="n">enigmaTask</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">               </span><span class="kd">let</span><span class="w"> </span><span class="n">numMillionaires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">millionairesProblem</span><span class="p">.</span><span class="n">numMillionaires</span><span class="p">.</span><span class="n">call</span><span class="p">();</span><span class="w"></span>
<span class="w">               </span><span class="kd">let</span><span class="w"> </span><span class="n">encryptedAddresses</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span><span class="w"></span>
<span class="w">               </span><span class="kd">let</span><span class="w"> </span><span class="n">encryptedNetWorths</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[];</span><span class="w"></span>
<span class="w">               </span><span class="c1">// Loop through each millionaire to construct a list of encrypted addresses and net worths</span>
<span class="w">               </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">numMillionaires</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                       </span><span class="c1">// Obtain the encrypted address and net worth for a particular millionaire</span>
<span class="w">                       </span><span class="kd">let</span><span class="w"> </span><span class="n">encryptedValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">millionairesProblem</span><span class="p">.</span><span class="n">getInfoForMillionaire</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="w"></span>
<span class="w">                               </span><span class="n">i</span><span class="w"></span>
<span class="w">                       </span><span class="p">);</span><span class="w"></span>
<span class="w">                       </span><span class="n">encryptedAddresses</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">encryptedValue</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="w"></span>
<span class="w">                       </span><span class="n">encryptedNetWorths</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">encryptedValue</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span><span class="w"></span>
<span class="w">               </span><span class="p">}</span><span class="w"></span>
<span class="w">               </span><span class="kd">let</span><span class="w"> </span><span class="n">blockNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">enigmaSetup</span><span class="p">.</span><span class="n">web3</span><span class="p">.</span><span class="n">eth</span><span class="p">.</span><span class="n">getBlockNumber</span><span class="p">();</span><span class="w"></span>
<span class="w">               </span><span class="cm">/*</span>
<span class="cm">               Take special note of the arguments passed in here (blockNumber, dappContractAddress,</span>
<span class="cm">               callable, callableArgs, callback, fee, preprocessors). This is the critical step for how</span>
<span class="cm">               you run the secure computation from your front-end!!!</span>
<span class="cm">               */</span><span class="w"></span>
<span class="w">               </span><span class="kd">let</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">enigmaSetup</span><span class="p">.</span><span class="n">enigma</span><span class="p">.</span><span class="n">createTask</span><span class="p">(</span><span class="w"></span>
<span class="w">                       </span><span class="n">blockNumber</span><span class="p">,</span><span class="w"></span>
<span class="w">                       </span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">millionairesProblem</span><span class="p">.</span><span class="n">address</span><span class="p">,</span><span class="w"></span>
<span class="w">                       </span><span class="n">CALLABLE</span><span class="p">,</span><span class="w"></span>
<span class="w">                       </span><span class="p">[</span><span class="n">encryptedAddresses</span><span class="p">,</span><span class="w"> </span><span class="n">encryptedNetWorths</span><span class="p">],</span><span class="w"></span>
<span class="w">                       </span><span class="n">CALLBACK</span><span class="p">,</span><span class="w"></span>
<span class="w">                       </span><span class="n">ENG_FEE</span><span class="p">,</span><span class="w"></span>
<span class="w">                       </span><span class="p">[]</span><span class="w"></span>
<span class="w">               </span><span class="p">);</span><span class="w"></span>
<span class="w">               </span><span class="kd">let</span><span class="w"> </span><span class="n">resultFee</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">task</span><span class="p">.</span><span class="n">approveFee</span><span class="p">({</span><span class="w"></span>
<span class="w">                       </span><span class="n">from</span><span class="o">:</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">enigmaSetup</span><span class="p">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"></span>
<span class="w">                       </span><span class="n">gas</span><span class="o">:</span><span class="w"> </span><span class="n">GAS</span><span class="w"></span>
<span class="w">               </span><span class="p">});</span><span class="w"></span>
<span class="w">               </span><span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">task</span><span class="p">.</span><span class="n">compute</span><span class="p">({</span><span class="w"></span>
<span class="w">                       </span><span class="n">from</span><span class="o">:</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">enigmaSetup</span><span class="p">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"></span>
<span class="w">                       </span><span class="n">gas</span><span class="o">:</span><span class="w"> </span><span class="n">GAS</span><span class="w"></span>
<span class="w">               </span><span class="p">});</span><span class="w"></span>
<span class="w">               </span><span class="n">console</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="s">&quot;got tx:&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">tx</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;for task:&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">task</span><span class="p">.</span><span class="n">taskId</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">               </span><span class="n">console</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="s">&quot;mined on block:&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">receipt</span><span class="p">.</span><span class="n">blockNumber</span><span class="p">);</span><span class="w"></span>
<span class="w">       </span><span class="p">}</span><span class="w"></span>

<span class="w">       </span><span class="c1">// onClick listener for Check Richest button, will call the enigmaTask from here</span>
<span class="w">       </span><span class="n">async</span><span class="w"> </span><span class="n">handleSubmit</span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">               </span><span class="n">event</span><span class="p">.</span><span class="n">preventDefault</span><span class="p">();</span><span class="w"></span>
<span class="w">               </span><span class="kd">let</span><span class="w"> </span><span class="n">richestAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Computing richest...&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">               </span><span class="n">this</span><span class="p">.</span><span class="n">setState</span><span class="p">({</span><span class="w"> </span><span class="n">richestAddress</span><span class="w"> </span><span class="p">});</span><span class="w"></span>
<span class="w">               </span><span class="c1">// Run the enigma task secure computation above</span>
<span class="w">               </span><span class="n">await</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">enigmaTask</span><span class="p">();</span><span class="w"></span>
<span class="w">               </span><span class="c1">// Watch for event and update state once callback is completed/event emitted</span>
<span class="w">               </span><span class="kr">const</span><span class="w"> </span><span class="n">callbackFinishedEvent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">millionairesProblem</span><span class="p">.</span><span class="n">CallbackFinished</span><span class="p">();</span><span class="w"></span>
<span class="w">               </span><span class="n">callbackFinishedEvent</span><span class="p">.</span><span class="n">watch</span><span class="p">(</span><span class="n">async</span><span class="w"> </span><span class="p">(</span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                       </span><span class="n">richestAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">millionairesProblem</span><span class="p">.</span><span class="n">richestMillionaire</span><span class="p">.</span><span class="n">call</span><span class="p">();</span><span class="w"></span>
<span class="w">                       </span><span class="n">this</span><span class="p">.</span><span class="n">setState</span><span class="p">({</span><span class="w"> </span><span class="n">richestAddress</span><span class="w"> </span><span class="p">});</span><span class="w"></span>
<span class="w">               </span><span class="p">});</span><span class="w"></span>
<span class="w">       </span><span class="p">}</span><span class="w"></span>

<span class="w">       </span><span class="n">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">               </span><span class="kr">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">;</span><span class="w"></span>
<span class="w">               </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">numMillionaires</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                       </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">                               </span><span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                                       </span><span class="o">&lt;</span><span class="n">Button</span><span class="w"> </span><span class="n">onClick</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">onCreateNewMillionaresProblem</span><span class="p">}</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                                               </span><span class="p">{</span><span class="s">&quot;Create New Millionaires&#39; Problem&quot;</span><span class="p">}</span><span class="w"></span>
<span class="w">                                       </span><span class="o">&lt;/</span><span class="n">Button</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                               </span><span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                       </span><span class="p">);</span><span class="w"></span>
<span class="w">               </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                       </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">                               </span><span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                                       </span><span class="o">&lt;</span><span class="n">Button</span><span class="w"></span>
<span class="w">                                               </span><span class="n">onClick</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">onCreateNewMillionaresProblem</span><span class="p">}</span><span class="w"></span>
<span class="w">                                               </span><span class="n">variant</span><span class="o">=</span><span class="s">&quot;contained&quot;</span><span class="w"></span>
<span class="w">                                       </span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                                               </span><span class="p">{</span><span class="s">&quot;Create New Millionaires&#39; Problem&quot;</span><span class="p">}</span><span class="w"></span>
<span class="w">                                       </span><span class="o">&lt;/</span><span class="n">Button</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                                       </span><span class="o">&lt;</span><span class="n">h2</span><span class="o">&gt;</span><span class="nb">Num</span><span class="w"> </span><span class="n">Millionaires</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">numMillionaires</span><span class="p">}</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                                       </span><span class="o">&lt;</span><span class="n">h2</span><span class="o">&gt;</span><span class="n">Richest</span><span class="w"> </span><span class="n">Millionaire</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">richestAddress</span><span class="p">}</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                                       </span><span class="o">&lt;</span><span class="n">AddMillionaireDialog</span><span class="w"></span>
<span class="w">                                               </span><span class="n">accounts</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">enigmaSetup</span><span class="p">.</span><span class="n">accounts</span><span class="p">}</span><span class="w"></span>
<span class="w">                                               </span><span class="n">onAddMillionaire</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">addMillionaire</span><span class="p">}</span><span class="w"></span>
<span class="w">                                       </span><span class="o">/&gt;</span><span class="w"></span>
<span class="w">                                       </span><span class="o">&lt;</span><span class="n">br</span><span class="w"> </span><span class="o">/&gt;</span><span class="w"></span>
<span class="w">                                       </span><span class="o">&lt;</span><span class="n">Button</span><span class="w"></span>
<span class="w">                                               </span><span class="n">onClick</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">handleSubmit</span><span class="p">}</span><span class="w"></span>
<span class="w">                                               </span><span class="n">disabled</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">numMillionaires</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">}</span><span class="w"></span>
<span class="w">                                               </span><span class="n">variant</span><span class="o">=</span><span class="s">&quot;contained&quot;</span><span class="w"></span>
<span class="w">                                               </span><span class="n">color</span><span class="o">=</span><span class="s">&quot;secondary&quot;</span><span class="w"></span>
<span class="w">                                       </span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                                               </span><span class="n">Check</span><span class="w"> </span><span class="n">Richest</span><span class="w"></span>
<span class="w">                                       </span><span class="o">&lt;/</span><span class="n">Button</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                               </span><span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                       </span><span class="p">);</span><span class="w"></span>
<span class="w">               </span><span class="p">}</span><span class="w"></span>
<span class="w">       </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Function to encrypt values (in this case either address or net worth)</span>
<span class="n">function</span><span class="w"> </span><span class="n">getEncryptedValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">       </span><span class="kd">let</span><span class="w"> </span><span class="n">clientPrivKey</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">               </span><span class="s">&quot;853ee410aa4e7840ca8948b8a2f67e9a1c2f4988ff5f4ec7794edf57be421ae5&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">       </span><span class="kd">let</span><span class="w"> </span><span class="n">enclavePubKey</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">               </span><span class="s">&quot;0061d93b5412c0c99c3c7867db13c4e13e51292bd52565d002ecf845bb0cfd8adfa5459173364ea8aff3fe24054cca88581f6c3c5e928097b9d4d47fce12ae47&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">       </span><span class="kd">let</span><span class="w"> </span><span class="n">derivedKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engUtils</span><span class="p">.</span><span class="n">getDerivedKey</span><span class="p">(</span><span class="n">enclavePubKey</span><span class="p">,</span><span class="w"> </span><span class="n">clientPrivKey</span><span class="p">);</span><span class="w"></span>
<span class="w">       </span><span class="kd">let</span><span class="w"> </span><span class="n">encrypted</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">engUtils</span><span class="p">.</span><span class="n">encryptMessage</span><span class="p">(</span><span class="n">derivedKey</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span><span class="w"></span>

<span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="n">encrypted</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">MillionairesProblemWrapper</span><span class="p">.</span><span class="n">propTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">       </span><span class="n">classes</span><span class="o">:</span><span class="w"> </span><span class="n">PropTypes</span><span class="p">.</span><span class="n">object</span><span class="p">.</span><span class="n">isRequired</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="n">export</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">withStyles</span><span class="p">(</span><span class="n">styles</span><span class="p">)(</span><span class="n">MillionairesProblemWrapper</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">MillionairesProblemWrapper.js</span></code> component drives the business logic for the MillionairesProblem that’s being rendered and handles:</p>
<ul class="simple">
<li>The logic to <code class="docutils literal"><span class="pre">addMillionaire</span></code> (committing encrypted values for the address and net worth to the contract) [lines 51–66].</li>
<li>Rendering the current state of the contract (number of participants, richest address) [lines 145–146].</li>
<li>The <code class="docutils literal"><span class="pre">enigmaTask</span></code> (in charge of executing the secret computation, running the callable and callback functions with the encrypted arguments necessary) [lines 68–109].</li>
</ul>
<p><strong>4.</strong> In the same directory, create a file named <code class="docutils literal"><span class="pre">AddMillionaireDialog.js</span></code> and paste the following code:</p>
<div class="highlight-rust"><div class="highlight"><pre><span class="n">import</span><span class="w"> </span><span class="n">React</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;react&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">PropTypes</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;prop-types&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">withStyles</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;@material-ui/core/styles&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">Button</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;@material-ui/core/Button&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">Dialog</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;@material-ui/core/Dialog&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">DialogActions</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;@material-ui/core/DialogActions&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">DialogContent</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;@material-ui/core/DialogContent&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">DialogContentText</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;@material-ui/core/DialogContentText&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">DialogTitle</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;@material-ui/core/DialogTitle&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">Input</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;@material-ui/core/Input&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">InputLabel</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;@material-ui/core/InputLabel&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">FormControl</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;@material-ui/core/FormControl&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">MenuItem</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;@material-ui/core/MenuItem&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">import</span><span class="w"> </span><span class="n">Select</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">&quot;@material-ui/core/Select&quot;</span><span class="p">;</span><span class="w"></span>

<span class="kr">const</span><span class="w"> </span><span class="n">styles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">theme</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">({</span><span class="w"></span>
<span class="w"> </span><span class="n">button</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">display</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;block&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="n">marginTop</span><span class="o">:</span><span class="w"> </span><span class="n">theme</span><span class="p">.</span><span class="n">spacing</span><span class="p">.</span><span class="n">unit</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w"> </span><span class="n">formControl</span><span class="o">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">margin</span><span class="o">:</span><span class="w"> </span><span class="n">theme</span><span class="p">.</span><span class="n">spacing</span><span class="p">.</span><span class="n">unit</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="n">minWidth</span><span class="o">:</span><span class="w"> </span><span class="mi">120</span><span class="w"></span>
<span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>

<span class="n">class</span><span class="w"> </span><span class="n">AddMillionaireDialog</span><span class="w"> </span><span class="n">extends</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="n">constructor</span><span class="p">(</span><span class="n">props</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">super</span><span class="p">(</span><span class="n">props</span><span class="p">);</span><span class="w"></span>
<span class="w">   </span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">     </span><span class="n">open</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">     </span><span class="n">millionaireAddress</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;None&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">     </span><span class="n">millionaireNetWorth</span><span class="o">:</span><span class="w"> </span><span class="n">null</span><span class="w"></span>
<span class="w">   </span><span class="p">};</span><span class="w"></span>
<span class="w">   </span><span class="n">this</span><span class="p">.</span><span class="n">handleChangeAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">handleChangeAddress</span><span class="p">.</span><span class="n">bind</span><span class="p">(</span><span class="n">this</span><span class="p">);</span><span class="w"></span>
<span class="w">   </span><span class="n">this</span><span class="p">.</span><span class="n">handleChangeNetWorth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">handleChangeNetWorth</span><span class="p">.</span><span class="n">bind</span><span class="p">(</span><span class="n">this</span><span class="p">);</span><span class="w"></span>
<span class="w">   </span><span class="n">this</span><span class="p">.</span><span class="n">handleSubmit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">handleSubmit</span><span class="p">.</span><span class="n">bind</span><span class="p">(</span><span class="n">this</span><span class="p">);</span><span class="w"></span>
<span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w"> </span><span class="n">handleClickOpen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">this</span><span class="p">.</span><span class="n">setState</span><span class="p">({</span><span class="w"> </span><span class="n">open</span><span class="o">:</span><span class="w"> </span><span class="k">true</span><span class="w"> </span><span class="p">});</span><span class="w"></span>
<span class="w"> </span><span class="p">};</span><span class="w"></span>

<span class="w"> </span><span class="n">handleClose</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">this</span><span class="p">.</span><span class="n">setState</span><span class="p">({</span><span class="w"> </span><span class="n">open</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="p">});</span><span class="w"></span>
<span class="w"> </span><span class="p">};</span><span class="w"></span>

<span class="w"> </span><span class="c1">// onChange listener to update state with user-input address</span>
<span class="w"> </span><span class="n">handleChangeAddress</span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">this</span><span class="p">.</span><span class="n">setState</span><span class="p">({</span><span class="w"> </span><span class="n">millionaireAddress</span><span class="o">:</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">target</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="p">});</span><span class="w"></span>
<span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w"> </span><span class="c1">// onChange listener to update state with user-input net worth</span>
<span class="w"> </span><span class="n">handleChangeNetWorth</span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">this</span><span class="p">.</span><span class="n">setState</span><span class="p">({</span><span class="w"> </span><span class="n">millionaireNetWorth</span><span class="o">:</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">target</span><span class="p">.</span><span class="n">value</span><span class="w"> </span><span class="p">});</span><span class="w"></span>
<span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w"> </span><span class="c1">// onClick listener to update to trigger addMillionaire callback from parent component</span>
<span class="w"> </span><span class="n">async</span><span class="w"> </span><span class="n">handleSubmit</span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">event</span><span class="p">.</span><span class="n">preventDefault</span><span class="p">();</span><span class="w"></span>
<span class="w">   </span><span class="c1">// Trigger MillionairesProblemWrapper addMillionaire callback</span>
<span class="w">   </span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">onAddMillionaire</span><span class="p">(</span><span class="w"></span>
<span class="w">     </span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">millionaireAddress</span><span class="p">,</span><span class="w"></span>
<span class="w">     </span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">millionaireNetWorth</span><span class="w"></span>
<span class="w">   </span><span class="p">);</span><span class="w"></span>
<span class="w">   </span><span class="n">this</span><span class="p">.</span><span class="n">setState</span><span class="p">({</span><span class="w"></span>
<span class="w">     </span><span class="n">open</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">     </span><span class="n">millionaireAddress</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;None&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">     </span><span class="n">millionaireNetWorth</span><span class="o">:</span><span class="w"> </span><span class="n">null</span><span class="w"></span>
<span class="w">   </span><span class="p">});</span><span class="w"></span>
<span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="w"> </span><span class="n">render</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="kr">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">classes</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">     </span><span class="o">&lt;</span><span class="n">div</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">       </span><span class="o">&lt;</span><span class="n">Button</span><span class="w"></span>
<span class="w">         </span><span class="n">onClick</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">handleClickOpen</span><span class="p">}</span><span class="w"></span>
<span class="w">         </span><span class="n">variant</span><span class="o">=</span><span class="s">&quot;contained&quot;</span><span class="w"></span>
<span class="w">         </span><span class="n">color</span><span class="o">=</span><span class="s">&quot;primary&quot;</span><span class="w"></span>
<span class="w">       </span><span class="o">&gt;</span><span class="w"></span>
<span class="w">         </span><span class="nb">Add</span><span class="w"> </span><span class="n">Millionaire</span><span class="w"></span>
<span class="w">       </span><span class="o">&lt;/</span><span class="n">Button</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">       </span><span class="o">&lt;</span><span class="n">Dialog</span><span class="w"></span>
<span class="w">         </span><span class="n">open</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">open</span><span class="p">}</span><span class="w"></span>
<span class="w">         </span><span class="n">onClose</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">handleClose</span><span class="p">}</span><span class="w"></span>
<span class="w">         </span><span class="n">aria</span><span class="o">-</span><span class="n">labelledby</span><span class="o">=</span><span class="s">&quot;form-dialog-title&quot;</span><span class="w"></span>
<span class="w">       </span><span class="o">&gt;</span><span class="w"></span>
<span class="w">         </span><span class="o">&lt;</span><span class="n">DialogTitle</span><span class="w"> </span><span class="n">id</span><span class="o">=</span><span class="s">&quot;form-dialog-title&quot;</span><span class="o">&gt;</span><span class="nb">Add</span><span class="w"> </span><span class="n">Millionaire</span><span class="o">&lt;/</span><span class="n">DialogTitle</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">         </span><span class="o">&lt;</span><span class="n">DialogContent</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">           </span><span class="o">&lt;</span><span class="n">DialogContentText</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">             </span><span class="n">To</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">yourself</span><span class="p">,</span><span class="w"> </span><span class="n">please</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">net</span><span class="w"></span>
<span class="w">             </span><span class="n">worth</span><span class="p">...</span><span class="w"></span>
<span class="w">           </span><span class="o">&lt;/</span><span class="n">DialogContentText</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">           </span><span class="o">&lt;</span><span class="n">form</span><span class="w"> </span><span class="n">className</span><span class="o">=</span><span class="p">{</span><span class="n">classes</span><span class="p">.</span><span class="n">root</span><span class="p">}</span><span class="w"> </span><span class="n">onSubmit</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">handleSubmit</span><span class="p">}</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">             </span><span class="o">&lt;</span><span class="n">FormControl</span><span class="w"> </span><span class="n">className</span><span class="o">=</span><span class="p">{</span><span class="n">classes</span><span class="p">.</span><span class="n">formControl</span><span class="p">}</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">               </span><span class="o">&lt;</span><span class="n">InputLabel</span><span class="w"> </span><span class="n">htmlFor</span><span class="o">=</span><span class="s">&quot;millionaireAddress&quot;</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                 </span><span class="n">Millionaire</span><span class="w"> </span><span class="n">Address</span><span class="w"></span>
<span class="w">               </span><span class="o">&lt;/</span><span class="n">InputLabel</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">               </span><span class="o">&lt;</span><span class="n">Select</span><span class="w"></span>
<span class="w">                 </span><span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">millionaireAddress</span><span class="p">}</span><span class="w"></span>
<span class="w">                 </span><span class="n">onChange</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">handleChangeAddress</span><span class="p">}</span><span class="w"></span>
<span class="w">                 </span><span class="n">inputProps</span><span class="o">=</span><span class="p">{{</span><span class="w"></span>
<span class="w">                   </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;address&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                   </span><span class="n">id</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;millionaireAddress&quot;</span><span class="w"></span>
<span class="w">                 </span><span class="p">}}</span><span class="w"></span>
<span class="w">               </span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                 </span><span class="o">&lt;</span><span class="n">MenuItem</span><span class="w"> </span><span class="n">value</span><span class="o">=</span><span class="s">&quot;&quot;</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                   </span><span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="nb">None</span><span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                 </span><span class="o">&lt;/</span><span class="n">MenuItem</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                 </span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">props</span><span class="p">.</span><span class="n">accounts</span><span class="p">.</span><span class="n">map</span><span class="p">((</span><span class="n">account</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                   </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">                     </span><span class="o">&lt;</span><span class="n">MenuItem</span><span class="w"> </span><span class="n">key</span><span class="o">=</span><span class="p">{</span><span class="n">i</span><span class="p">}</span><span class="w"> </span><span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="n">account</span><span class="p">}</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                       </span><span class="p">{</span><span class="n">account</span><span class="p">}</span><span class="w"></span>
<span class="w">                     </span><span class="o">&lt;/</span><span class="n">MenuItem</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                   </span><span class="p">);</span><span class="w"></span>
<span class="w">                 </span><span class="p">})}</span><span class="w"></span>
<span class="w">               </span><span class="o">&lt;/</span><span class="n">Select</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">             </span><span class="o">&lt;/</span><span class="n">FormControl</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">             </span><span class="o">&lt;</span><span class="n">FormControl</span><span class="w"> </span><span class="n">className</span><span class="o">=</span><span class="p">{</span><span class="n">classes</span><span class="p">.</span><span class="n">formControl</span><span class="p">}</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">               </span><span class="o">&lt;</span><span class="n">InputLabel</span><span class="w"> </span><span class="n">htmlFor</span><span class="o">=</span><span class="s">&quot;millionaireNetWorth&quot;</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">                 </span><span class="n">Millionaire</span><span class="w"> </span><span class="n">Net</span><span class="w"> </span><span class="n">Worth</span><span class="w"></span>
<span class="w">               </span><span class="o">&lt;/</span><span class="n">InputLabel</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">               </span><span class="o">&lt;</span><span class="n">Input</span><span class="w"></span>
<span class="w">                 </span><span class="n">id</span><span class="o">=</span><span class="s">&quot;millionaireNetWorth&quot;</span><span class="w"></span>
<span class="w">                 </span><span class="n">onChange</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">handleChangeNetWorth</span><span class="p">}</span><span class="w"></span>
<span class="w">                 </span><span class="n">autoComplete</span><span class="o">=</span><span class="s">&quot;off&quot;</span><span class="w"></span>
<span class="w">               </span><span class="o">/&gt;</span><span class="w"></span>
<span class="w">             </span><span class="o">&lt;/</span><span class="n">FormControl</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">           </span><span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">         </span><span class="o">&lt;/</span><span class="n">DialogContent</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">         </span><span class="o">&lt;</span><span class="n">DialogActions</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">           </span><span class="o">&lt;</span><span class="n">Button</span><span class="w"> </span><span class="n">onClick</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">handleClose</span><span class="p">}</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="s">&quot;primary&quot;</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">             </span><span class="n">Cancel</span><span class="w"></span>
<span class="w">           </span><span class="o">&lt;/</span><span class="n">Button</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">           </span><span class="o">&lt;</span><span class="n">Button</span><span class="w"> </span><span class="n">onClick</span><span class="o">=</span><span class="p">{</span><span class="n">this</span><span class="p">.</span><span class="n">handleSubmit</span><span class="p">}</span><span class="o">&gt;</span><span class="nb">Add</span><span class="w"> </span><span class="n">Millionaire</span><span class="o">&lt;/</span><span class="n">Button</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">         </span><span class="o">&lt;/</span><span class="n">DialogActions</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">       </span><span class="o">&lt;/</span><span class="n">Dialog</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">     </span><span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">   </span><span class="p">);</span><span class="w"></span>
<span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">AddMillionaireDialog</span><span class="p">.</span><span class="n">propTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="n">classes</span><span class="o">:</span><span class="w"> </span><span class="n">PropTypes</span><span class="p">.</span><span class="n">object</span><span class="p">.</span><span class="n">isRequired</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="n">export</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="n">withStyles</span><span class="p">(</span><span class="n">styles</span><span class="p">)(</span><span class="n">AddMillionaireDialog</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>This <code class="docutils literal"><span class="pre">AddMillionaireDialog.js</span></code> file is a <a class="reference external" href="https://material-ui.com">material-ui</a>-driven dialog script which handles:</p>
<ul class="simple">
<li>Inputting address and net worth [lines 48–56].</li>
<li>Triggering the <code class="docutils literal"><span class="pre">addMillionaire</span></code> callback from the above file, which commits the encrypted address and net worth to the active <code class="docutils literal"><span class="pre">MillionaireProblem</span></code> contract [lines 58–71].</li>
</ul>
<p><strong>5.</strong> To build your changes, simply rereun <code class="docutils literal"><span class="pre">npm</span> <span class="pre">run</span> <span class="pre">start</span></code> in the <code class="docutils literal"><span class="pre">/client</span></code> folder. You should now see your new interface loaded.</p>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>That’s it! By now you have successfully deployed the Enigma Docker Test Network,
created a template dApp and built a graphical front-end using React. For more
information on how Enigma functions, refer to the following few sections.</p>
<p><strong>Have questions or issues?</strong> Stop by our <a class="reference external" href="https://forum.enigma.co">developer forum</a> and let us know!</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="SystemDesign.html" class="btn btn-neutral float-right" title="System Design" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="SecretContracts.html" class="btn btn-neutral" title="Writing a Secret Contract" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018 Enigma MPC, Inc.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>